#include<fstream>
#include<iostream>
#include<string>
#define ALL_LENGTH 0x168000
#define BASIC_LENGTH 0x1ff
#define GET_LEN(arr) (sizeof(arr)/sizeof(arr[0]))
 
 using std::string;
 using std::ofstream;
 

// global field
unsigned char basic[BASIC_LENGTH] = { 0xeb,0x4e,0x90,0x48,0x45,0x4c,0x4c,0x4f,0x49,0x50,0x4c,0x00,0x02,0x01,0x01,0x00,0x02,0xe0,
		0x00,0x40,0x0b,0xf0,0x09,0x00,0x12,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x40,0x0b,0x00,0x00,0x00,0x00,0x29,
		0xff,0xff,0xff,0xff,0x48,0x45,0x4c,0x4c,0x4f,0x2d,0x4f,0x53,0x20,0x20,0x20,0x46,0x41,0x54,0x31,0x32,
		0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xb8,0x00,0x00,0x8e,
		0xd0,0xbc,0x00,0x7c,0x8e,0xd8,0x8e,0xc0,0xbe,0x74,0x7c,0x8a,
		0x04,0x83,0xc6,0x01,0x3c,0x00,0x74,0x09,0xb4,0x0e,0xbb,0x0f,0x00,0xcd,0x10,0xeb,0xee,0xf4,0xeb,0xfd,0x0d,0x0a };
unsigned char toWrite[ALL_LENGTH] = { 0 };

 string s("this is the first os");
int main()
{
	unsigned i, j;
	for ( i = 0,  j = GET_LEN(basic); i < s.length(); i++)
		toWrite[j + i] = s[i];
	for( i=0, j=GET_LEN(basic);i<j;i++)
		toWrite[i] = s[i];
	toWrite[BASIC_LENGTH - 1] = 0x55;
	toWrite[BASIC_LENGTH] = 0xaa;
	ofstream  destF("T1os.img", std::ios::out);
	for ( i = 0,  j = GET_LEN(toWrite); i < j; i++)
		destF << toWrite[i];
	destF.close();
	
	return 0;
}
